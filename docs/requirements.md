━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
要件定義書
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

■ プロジェクト名

GoodsShop&Trade


■ プロジェクト概要

アイドルグッズのECサイトとトレード募集掲示板を統合したWebアプリケーション


■ 目的

アイドルファンが新品グッズの購入と、生写真・ランダムグッズのトレード募集を一つのプラットフォームで行えるようにする。


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
機能要件
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【1. 認証・会員管理】

1.1 ログイン機能
・ログイン/ログアウト
・SESSION管理
・パスワードハッシュ化
・reCAPTCHA v3による不正ログイン防止

1.2 会員登録
・メールアドレス・パスワードによる新規登録
・重複チェック
・確認ページ表示

1.3 パスワード再設定
・「パスワードを忘れた方はこちら」リンク
・メールによるパスワードリセット

1.4 ソーシャルログイン
・外部SNS APIとの連携

1.5 会員情報編集・退会
・プロフィール編集（パスワード変更含む）
・退会機能

1.6 マイページ
・購入履歴表示
・いいね管理


【2. 管理者機能】

2.1 管理者ログイン
・Basic認証による管理画面アクセス

2.2 会員管理
・会員一覧表示（新規作成/閲覧/編集/削除）
・文字検索（絞り込み）
・ソート機能
・ページネーション（20件毎）
・チェックボックス選択（全選択含む）
・CSV エクスポート または CSVインポート
・サンクスメール等の自動メール配信（ユーザー＋管理者双方）


【3. EC機能】

3.1 商品管理
・商品登録（カテゴリ分け、画像アップロード）
・商品一覧表示
・商品編集・削除
・ページネーション（20件毎）
・文字検索（絞り込み）
・ソート機能
  - 価格順
  - 五十音順
  - 人気順（いいね数）
  - 売上順

3.2 商品検索
・サイト内検索
・AND検索（半角スペース区切りで複数キーワード）
・OR検索/NOT検索の切り替え

3.3 ECカート機能
・カートに商品追加
・個数変更
・確認ページ表示
・リロード時に個数が増えない仕様（リロード耐性）
・リアクティブ/非同期処理

3.4 お気に入り・いいね機能
・お気に入りリスト登録/解除
・いいね登録/解除（ブックマーク登録/解除、欲しいモノリスト）
・メール自動送信（ユーザー＋管理者）

3.5 注文管理
・注文（購入）管理機能
・CSV エクスポート または CSVインポート


【4. 掲示板機能（トレード）】

4.1 記事管理
・記事作成（スレッド新規作成）
・記事編集（内容のみ編集可、件名変更不可）
・記事削除
・画像アップロード
・サムネイル自動作成
・検索機能

4.2 カテゴリ管理
・カテゴリ追加/編集/削除

4.3 アーカイブ
・月別アーカイブ
・カテゴリ別アーカイブ

4.4 コメント機能
・コメント投稿
・コメント編集（投稿者のみ）
・コメント削除（投稿者のみ）

4.5 SNS共有
・SNS投稿機能


【5. 問い合わせ機能】

5.1 問い合わせフォーム
・入力フォーム
・バリデーション（エラーチェック/入力値の保存）
・確認ページ
・DB登録
・自動メール送信


【6. UI/UX要件】

6.1 レスポンシブ対応
・スマートフォン・タブレット対応

6.2 JavaScript機能（jQuery使用）
・画像スライダー
・モーダルウィンドウ表示
・ライブプレビュー機能

6.3 ユーザビリティ
・検索結果0件時メッセージ表示「検索に一致する商品は見つかりませんでした。」
・カート0件時メッセージ表示「ショッピングカートには何も入っていません。」
・Now Loading表示（通信環境が悪い場合）
・進捗率表示（円グラフまたは棒グラフで達成率/進捗率を表示）
・リアルタイムバリデーション
  - 必要な条件（要件）を表示
  - 満たすとリアルタイムで緑（OK）に変化

6.4 エラーページ
・404 Not Found エラーページ
・500番台 Server Error ページ
・「システムに問題が起きました。」メッセージ表示
・「ショッピングを続ける」リンク表示

6.5 画面設計
・画面遷移図 または 画面設計書の作成


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
非機能要件
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【セキュリティ】

・XSS対策（エスケープ処理）
・CSRF対策（トークン検証）
・SQLインジェクション対策（PDO、プリペアドステートメント）
・パスワードハッシュ化（password_hash）
・reCAPTCHA v3
・Basic認証（管理画面）


【コード品質】

・PHPとHTMLの完全分離（MVC）
・機能毎にソース分割（最低限MVCモデル）
・関数・クラスの責任分離（それぞれを短く、小さく）
・コントローラーの簡素化/抽象化
  - 基本、値の受取り＋引き渡しのみ
  - 具体的な処理（DB処理含む）はすべてモデルに記述
  - 取得系処理はstaticメソッドやサービス層を用いたファサードで共通化
・自作クラス（またはテンプレート）を1つ以上使用
・PDOクラス使用
・namespace（名前空間）の活用
・バリデーション処理を細かく


【可読性・保守性】

・インデントが整っている
・スペースを適切に空ける
・適切なコメント（説明）を残す
・1つの処理が長すぎない（目安：30～40行以内）
・関数は可能な限り「単一処理」を実行するように切り分ける
・インデント深さ3段以内


【データベース】

・MySQL使用
・リレーションが活用されている
・商品点数50点以上
・会員登録人数50人以上
・注文件数50件以上


【インフラ】

・GitHubへのアップ（チーム開発を想定）
・Docker + Kubernetes (k8s) 環境を構築し、動作検証


【今後の展望】

・生PHP版を、見た目や挙動を一切変えず、Laravel版でも作成する
